# Isaac Sim Environment Configuration

## Overview
Configuration files for setting up Isaac Sim environments for the Physical AI & Humanoid Robotics textbook modules. These configurations will be used in Module 2 for simulation environment setup and lab exercises.

## Basic Environment Configuration

### config_basic_env.yaml
```yaml
# Basic Isaac Sim environment configuration for textbook modules
simulation:
  physics_dt: 0.008  # Physics simulation timestep (seconds)
  rendering_dt: 0.033  # Rendering timestep (seconds) - ~30 FPS
  stage_units_in_meters: 1.0  # 1 stage unit equals 1 meter
  gravity: [0.0, 0.0, -9.81]  # Gravity vector in m/s^2 (x, y, z)

physics:
  solver_type: "TGS"  # Type of physics solver
  num_position_iterations: 4
  num_velocity_iterations: 1
  default_buffer_size: 16
  enable_gpu_physics: false  # Set to true if GPU physics is available
  gpu_max_particles: 100000

renderer:
  resolution_x: 1280
  resolution_y: 720
  enable_fabric: true
  render_mode: "RaytracedLightMap"  # Options: RaytracedLightMap, PathTraced, Iray
  max_surface_bounces: 8

robot:
  urdf_path: "/path/to/humanoid_robot.urdf"  # Path to robot URDF file
  default_position: [0.0, 0.0, 1.0]  # Default spawn position (x, y, z)
  default_orientation: [0.0, 0.0, 0.0, 1.0]  # Default orientation as quaternion (x, y, z, w)
  physics_material: "default"  # Physics material to apply to robot

sensors:
  lidar:
    enable: true
    horizontal_samples: 640
    vertical_samples: 1
    max_range: 10.0
    rotation_frequency: 20
    points_topic: "/isaac_sim/lidar_points"
  
  camera:
    enable: true
    resolution_x: 640
    resolution_y: 480
    fov: 1.047  # Field of view in radians (~60 degrees)
    image_topic: "/isaac_sim/camera_image"
  
  imu:
    enable: true
    linear_acceleration_noise: 0.01
    angular_velocity_noise: 0.001
    orientation_noise: 0.01
    imu_topic: "/isaac_sim/imu_data"

ros_bridge:
  enable: true
  ros2_context: "isaac_sim"
  robot_description_topic: "/robot_description"
  joint_states_topic: "/joint_states"
  cmd_vel_topic: "/cmd_vel"
```

## Physics Configuration for Humanoid Simulations

### config_physics_humanoid.yaml
```yaml
# Physics configuration optimized for humanoid robot simulation
physics:
  # Solver settings
  solver_type: "TGS"  # TGS (Two Gauss-Seidel) solver
  solver_position_iterations: 8  # Position solver iterations
  solver_velocity_iterations: 2  # Velocity solver iterations
  enable_stabilization: true
  stabilization_threshold: 0.001
  
  # Contact settings
  contact_offset: 0.002  # Contact offset distance in meters
  rest_offset: 0.0  # Rest offset distance in meters
  bounce_threshold: 0.5  # Velocity threshold for bounce in m/s
  
  # Material properties
  default_static_friction: 0.5
  default_dynamic_friction: 0.4
  default_restitution: 0.1  # Bounciness (0 = no bounce, 1 = very bouncy)
  
  # Articulation settings for humanoid joints
  articulation_position_iteration: 4
  articulation_velocity_iteration: 1
  
  # Joint properties
  joint_friction: 0.1
  joint_effort_limit: 100.0  # Maximum effort limit for joints
  joint_velocity_limit: 10.0  # Maximum velocity limit for joints
```

## Scene Configuration

### config_scene_livingroom.yaml
```yaml
# Living room scene configuration for humanoid simulation
scene:
  name: "Living Room"
  description: "Simple living room environment for humanoid navigation and interaction"
  
  # Environment objects
  objects:
    - name: "floor"
      type: "plane"
      position: [0.0, 0.0, 0.0]
      size: [10.0, 10.0]
      material: "wood_floor"
    
    - name: "couch"
      type: "box"
      position: [2.0, 0.0, 0.5]
      rotation: [0.0, 0.0, 0.0]
      size: [2.0, 0.8, 0.8]
      material: "fabric"
    
    - name: "coffee_table"
      type: "box"
      position: [1.5, 0.0, 0.3]
      rotation: [0.0, 0.0, 0.0]
      size: [0.8, 0.6, 0.6]
      material: "wood"
    
    - name: "lamp"
      type: "cylinder"
      position: [-1.0, 1.5, 1.0]
      rotation: [0.0, 0.0, 0.0]
      size: [0.1, 1.5]
      material: "metal"
  
  # Lighting
  lighting:
    ambient_light: [0.3, 0.3, 0.3]  # RGB values [0.0, 1.0]
    directional_lights:
      - name: "sun"
        direction: [-0.5, -0.5, -1.0]  # Direction vector
        intensity: 1000.0
        color: [1.0, 1.0, 0.98]  # Color temperature resembling sunlight

  # Environment properties
  environment:
    gravity: [0.0, 0.0, -9.81]  # Standard Earth gravity
    wind_enabled: false
    wind_direction: [0.0, 1.0, 0.0]
    wind_force: 0.1
```

## Sensor Configuration for Humanoid Robots

### config_sensors_humanoid.yaml
```yaml
# Sensor configuration for humanoid robots in Isaac Sim
sensors:
  # LiDAR configuration
  lidar:
    enable: true
    sensor_type: "Velodyne_VLP_16"  # Using Velodyne VLP-16 as example
    position: [0.0, 0.0, 1.0]  # Position relative to robot base (typically head/chest)
    rotation: [0.0, 0.0, 0.0]  # Rotation relative to robot base
    topic: "/isaac_sim/lidar_points"
    parameters:
      range: 10.0  # Maximum range in meters
      rotation_frequency: 10  # Rotation frequency in Hz
      channels: 16  # Number of channels (for VLP-16)
      points_per_channel: 1800  # Points per revolution per channel at 10Hz
      horizontal_fov: 360.0  # Horizontal field of view in degrees
      vertical_fov: 30.0  # Vertical field of view in degrees
  
  # RGB camera configuration
  camera:
    enable: true
    position: [0.0, 0.0, 1.6]  # Positioned at head level
    rotation: [0.0, 0.0, 0.0]  # Facing forward
    resolution: [640, 480]  # Width and height in pixels
    fov: 1.047  # Field of view in radians (~60 degrees)
    topic: "/isaac_sim/camera_image"
    encoding: "rgb8"  # Image encoding format
  
  # Depth camera configuration
  depth_camera:
    enable: true
    position: [0.0, 0.0, 1.6]  # Positioned at head level
    rotation: [0.0, 0.0, 0.0]  # Facing forward
    resolution: [640, 480]  # Width and height in pixels
    fov: 1.047  # Field of view in radians (~60 degrees)
    topic: "/isaac_sim/depth_image"
    encoding: "32FC1"  # 32-bit float encoding for depth
  
  # IMU configuration
  imu:
    enable: true
    position: [0.0, 0.0, 0.8]  # Positioned at robot's center of mass
    rotation: [0.0, 0.0, 0.0]
    topic: "/isaac_sim/imu_data"
    parameters:
      linear_acceleration_noise: 0.01
      angular_velocity_noise: 0.001
      orientation_noise: 0.01
  
  # Force/Torque sensors on joints (for humanoid manipulation)
  force_torque_sensors:
    enable: true
    joints: ["left_hand_joint", "right_hand_joint"]  # Example joints
    topic_prefix: "/isaac_sim/ft_sensor"
```

## ROS Bridge Configuration

### config_ros_bridge.yaml
```yaml
# ROS 2 bridge configuration for Isaac Sim
ros_bridge:
  context_name: "isaac_sim_context"
  domain_id: 42  # ROS 2 domain ID to avoid conflicts
  
  # Robot description
  robot_description:
    topic: "/robot_description"
    publish_frequency: 1.0  # Hz
  
  # Joint states
  joint_state:
    topic: "/joint_states"
    publish_frequency: 50.0  # Hz
  
  # Command interfaces
  cmd_vel:
    topic: "/cmd_vel"
    queue_size: 1
  
  # Sensor data
  sensor_data:
    lidar_topic: "/isaac_sim/lidar_points"
    camera_topic: "/isaac_sim/camera_image"
    depth_topic: "/isaac_sim/depth_image"
    imu_topic: "/isaac_sim/imu_data"
  
  # TF frames
  tf:
    publish_frequency: 50.0  # Hz
    frames:
      robot_base_frame: "base_link"
      lidar_frame: "lidar_link"
      camera_frame: "camera_link"
      imu_frame: "imu_link"
```

## How to Use These Configurations

1. **Place Configuration Files**: Put these YAML files in the appropriate Isaac Sim configuration directory
2. **Load in Scripts**: Use Isaac Sim's Python API to load these configurations in simulation scripts
3. **Customize**: Adjust parameters as needed for specific simulation scenarios in the textbook
4. **Validate**: Test configurations to ensure they work properly with your robot models

These configurations provide a solid foundation for the Isaac Sim environments used in Modules 2-4 of the textbook, ensuring consistent and realistic simulations for learning purposes.